
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Data Sources for Upload &#8212; OnTask (B.2.8.0) 1.1.0 documentation</title>
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />
    <script type="text/javascript" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="The Table" href="table.html" />
    <link rel="prev" title="Workflow Details" href="details.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="data-sources-for-upload">
<span id="dataops"></span><h1>Data Sources for Upload<a class="headerlink" href="#data-sources-for-upload" title="Permalink to this headline">¶</a></h1>
<blockquote>
<div>“May be stories are are just data without a soul”
– Brené Brown</div></blockquote>
<p>This section describes the operations to upload and merge data into the table. It may be the case that this task is already done, or it is done automatically before you work with a workflow. If this is the case, you may skip this section. The data operations page offers various options to upload and merge data to the table and the process is divided into 2 to 4 steps.</p>
<div class="section" id="csv-files">
<h2>CSV Files<a class="headerlink" href="#csv-files" title="Permalink to this headline">¶</a></h2>
<p>CSV or “comma separated value” files are plain text files in which the first line contains a comma-separated list of column names, and every subsequent line contains the values of these columns for each row. It is a popular format to exchange data that can be represented as a table, and it is for this reason that OnTask allows to upload data in this format.</p>
<p>The functionality assumes that you have such file available in your computer and provides a form to upload it to the platform.</p>
<div class="figure align-center">
<img alt="../_images/Ontask___CSVUpload.png" src="../_images/Ontask___CSVUpload.png" />
</div>
<p>Some applications produce CSV files but the data is surrounded with by a few lines that need to be ignored. If this is the case, you may specify how many of these lines are present in your file and OnTask will ignored them when parsing the content.</p>
</div>
<div class="section" id="excel-files">
<h2>Excel Files<a class="headerlink" href="#excel-files" title="Permalink to this headline">¶</a></h2>
<p>The second format supported by OnTask to upload or merge data is Excel.</p>
<div class="figure align-center">
<img alt="../_images/Ontask___ExcelUpload.png" src="../_images/Ontask___ExcelUpload.png" />
</div>
<p>In this case the file is assumed to have multiple <em>Sheets</em> and one of them has to be selected to upload/merge the data.</p>
</div>
<div class="section" id="sql-connection">
<span id="sql-connection-run"></span><h2>SQL connection<a class="headerlink" href="#sql-connection" title="Permalink to this headline">¶</a></h2>
<p>The third method to upload/merge data into the current workflow is through a SQL connection to a remote database. These connections have to be <a class="reference internal" href="../Install/index.html#sql-connections"><span class="std std-ref">previously defined and configured by the system administrator</span></a>. Instructor users can use them to access the content of a previously defined table in a remote database. When selected, the option to upload data with  a SQL connection shows the table of available connections and the possibility to <em>Run</em> such connection:</p>
<div class="figure align-center">
<img alt="../_images/Ontask___SQLAvailable.png" src="../_images/Ontask___SQLAvailable.png" />
</div>
<p>When <em>running</em> a SQL connection the platform shows the configuration parameters and request the password to access the remote database (if required).</p>
<div class="figure align-center">
<img alt="../_images/Ontask___SQLRun.png" src="../_images/Ontask___SQLRun.png" />
</div>
</div>
</div>
<div class="section" id="data-upload">
<h1>Data Upload<a class="headerlink" href="#data-upload" title="Permalink to this headline">¶</a></h1>
<p>The operations described in the previous section obtain a data set and, if the workflow table is empty, it sets its initial content. In Step 2 of the process, OnTask offers the possibility of selecting and renaming the columns before they are uploaded to the table. For each column detected in the file, the table includes if it has been detected to be unique, its automatically detected type, a box to select, the name, and an alternative name (to allow column renaming). This step is to allow you to select those columns that are relevant and discard the rest. The platform requires you to choose <strong>at least</strong> one column with unique values.</p>
<div class="figure align-center">
<img alt="../_images/OnTask____Upload_Merge_step2.png" src="../_images/OnTask____Upload_Merge_step2.png" />
</div>
<p>After this step is performed, the data is stored in the table and the platform shows the <a class="reference internal" href="details.html#details"><span class="std std-ref">Workflow Details</span></a> page. If these operations are done with a workflow that already has data in the table, then two additional steps are required as part of the <em>merge</em> operation.</p>
</div>
<div class="section" id="data-merge">
<h1>Data Merge<a class="headerlink" href="#data-merge" title="Permalink to this headline">¶</a></h1>
<div class="sidebar">
<p class="first sidebar-title">Merge a.k.a “Join”</p>
<p class="last">Merging is quite common in databases and is known as a <em>join</em> operation. There are several variants of join operations depending how the differences between the key columns are handled. These same variants exist when combining columns in data frames (or a table).</p>
</div>
<p>A merge operation is needed when you want to <em>merge</em> a set of columns with an <strong>already existing table</strong>. This operation is very common in data science contexts. One of the problems is to specify how the values in the columns are <em>matched</em> with respect to the ones already existing in the table. In other words, each new column has a set of values, but they need to be in the right order so that the information is matched appropriately for every row. The solution for this problem is to include in both the existing table and the new data being merged a <strong>unique or key column</strong>. These columns have the property that unique distinguish each row with a value and therefore they are used to make sure that rows with matching values in these columns are merged. When uploading new data in a workflow that already contains data in its table, the platform automatically detects it and executes two additional steps to complete a <em>merge</em> operation.</p>
<p>The next step is the most delicate one. It requires you to identify the unique columns in both the existing data table and the one being uploaded, the criteria to merge the rows. We discuss each of these parameters in more detail.</p>
<div class="figure align-center">
<a class="reference internal image-reference" href="../_images/Ontask____Merge2.png"><img alt="../_images/Ontask____Merge2.png" src="../_images/Ontask____Merge2.png" style="width: 100%;" /></a>
</div>
<dl class="docutils">
<dt>Key columns</dt>
<dd>You have to select a key column present in the data to be merged (mandatory) and a key column from the existing data (mandatory).</dd>
<dt>Merge method</dt>
<dd><p class="first">There are four types of merging. Once you choose an option an explanation appears below.</p>
<dl class="last docutils">
<dt>Select only the rows with keys in both existing and new table</dt>
<dd><p class="first">It will process only the rows for which values in both key columns are present. Or in other words, any row for which there is no value in either of the key columns <strong>will be dropped</strong>.</p>
<div class="last figure align-center">
<img alt="../_images/merge_inner.png" src="../_images/merge_inner.png" />
</div>
</dd>
<dt>Select all rows in both the existing and new table</dt>
<dd><p class="first">All rows in both tables will be considered. You have to be careful with this option because it may produce columns that are no longer unique as a result.</p>
<div class="last figure align-center">
<img alt="../_images/merge_outer.png" src="../_images/merge_outer.png" />
</div>
</dd>
<dt>Select the rows with keys in the existing table</dt>
<dd><p class="first">Only the rows with a value in the existing table will be considered, the rest will be dropped.</p>
<div class="last figure align-center">
<img alt="../_images/merge_left.png" src="../_images/merge_left.png" />
</div>
</dd>
<dt>Select the rows with keys in the new table</dt>
<dd><p class="first">Only the rows with a value in the table being uploaded will be considered, the rest will be dropped.</p>
<div class="last figure align-center">
<img alt="../_images/merge_right.png" src="../_images/merge_right.png" />
</div>
</dd>
</dl>
</dd>
</dl>
<p>In any of these variants, for those columns that are present in both the existing table and the new table, the values of the second will update the existing ones. This updating operation may introduce non-values in some of the columns. You have to take extra care when performing this operation as it may destroy part of the existing data. In the extreme case, if you try to merge a table with a key column with no values in common with the existing key and you select the method that considers rows with keys in both the existing and new table, the result is an empty table.</p>
<p>After selecting these parameters the last step is to review the effect of the operation and proceed with the merge.</p>
<div class="figure align-center">
<img alt="../_images/Ontask____Merge3.png" src="../_images/Ontask____Merge3.png" />
</div>
</div>
<div class="section" id="plugins-transforming-the-data-with-your-own-code">
<h1>Plugins – Transforming the data with your own code<a class="headerlink" href="#plugins-transforming-the-data-with-your-own-code" title="Permalink to this headline">¶</a></h1>
<p>The additional method offered by OnTask to manipulate the data in a workflow’s table is to execute arbitrary Python code encapsulated as a Python module and placed in a pre-defined folder in the computer hosting the server. In the context of the platform, these Python modules are called <strong>Plugins</strong> and require some <a class="reference internal" href="../Install/index.html#plugin-install"><span class="std std-ref">previous configuration</span></a>. Before their execution, a plugin must be written and installed in the folder previously considered for that purpose.</p>
<p>The purpose of the plugins is to allow arbitrary transformations of the data attached to a workflow. The list of plugins available for execution can be accessed through the link <em>Transform</em> in the <em>Dataops</em> top menu item.</p>
<div class="figure align-center">
<img alt="../_images/OnTask____Transform_list.png" src="../_images/OnTask____Transform_list.png" />
</div>
<p>Each plugin is shown with a (unique) name, a description, the last time the code was modified (based on the file modification time), if the plugin is ready to execute, and the link for either the <em>Run</em> operation, or a link to the diagnostics if the execution is not possible.</p>
<p>The plugin execution request shows a form to collect the parameters required for the operation.</p>
<div class="figure align-center">
<img alt="../_images/OnTask____Run_Transformation.png" src="../_images/OnTask____Run_Transformation.png" />
</div>
<dl class="docutils">
<dt>Input columns</dt>
<dd>The columns from the data table that will be passed to the plugin. The plugin can define a set of <em>fixed</em> column names to extract. If this list is empty, the list is requested from the user.</dd>
<dt>Key column for merging</dt>
<dd>The plugins are supposed to create additional columns, and they need to be merged with the existing data. For this procedure, a key-column is needed to make sure the rows of the newly created data are correctly stored. They key column from the current data frame is added as part of the input data frame passed to the plugin.</dd>
<dt>Output column names</dt>
<dd>The plugins defines the names of the result columns. However, the upon execution, the user may rename any of those columns.</dd>
<dt>Suffix to add to the result columns</dt>
<dd>This field is provided to do a one-place renaming. If given, this suffix is added to the names of all output columns.</dd>
<dt>Execution parameters</dt>
<dd>This part of the form requests the pairs <em>(name, value)</em> as defined by the plugin.</dd>
</dl>
<p>After the appropriate data is provided the tool shows a plugin executing report showing the columns that will be created and how will they be merged with the existing data.</p>
<div class="section" id="plugin-requirements">
<span id="id1"></span><h2>Plugin requirements<a class="headerlink" href="#plugin-requirements" title="Permalink to this headline">¶</a></h2>
<p>The Python modules installed in the pre-defined folder need to satisfy various requirements to be considered for execution within OnTask. More precisely, the file <code class="docutils literal notranslate"><span class="pre">__init__.py</span></code> must contain:</p>
<ol class="arabic simple">
<li>Module variable <code class="docutils literal notranslate"><span class="pre">class_name</span></code> with the name of the class in the file that contains the required definitions.</li>
</ol>
<ol class="arabic simple">
<li>Class field <code class="docutils literal notranslate"><span class="pre">name</span></code> with the plugin name to show to the users.</li>
<li>Class field <code class="docutils literal notranslate"><span class="pre">escription_txt</span></code> with a string with the detailed description of what the
plugin does</li>
</ol>
<p>3. Class field <code class="docutils literal notranslate"><span class="pre">input_column_names</span></code> with a potentially empty list of column names
(strings). If the list is empty, the columns are selected by the user at
execution time.</p>
<p>4. Class field <code class="docutils literal notranslate"><span class="pre">output_column_names</span></code> with a non empty list of names (strings) of the
columns to be used for the output of the transformation.</p>
<p>5. Class field <code class="docutils literal notranslate"><span class="pre">parameters</span></code> with an optionally empty list with tuples with the following
structure:</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">('name',</span> <span class="pre">type,</span> <span class="pre">[list</span> <span class="pre">of</span> <span class="pre">allowed</span> <span class="pre">values],</span> <span class="pre">initial</span> <span class="pre">value,</span> <span class="pre">help_text)</span></code></p>
<p>These elements will be requested from the user before executing the
plugin through a form. The conditions on these values are:</p>
<ul class="simple">
<li>name must be a string</li>
<li>type must be a string equal to “integer”, “double”, “string”,
“datetime” or “boolean”.</li>
<li>The list of values is to restrict the
possible values</li>
<li>The initial value must be of the type specified by the second
element.</li>
<li>Help_text a string to show as help text</li>
</ul>
</div></blockquote>
<ol class="arabic" start="6">
<li><p class="first">Class method <code class="docutils literal notranslate"><span class="pre">run</span></code> that receives:</p>
<ul class="simple">
<li>a pandas data frame with the data to process</li>
<li>a string with the name of the key column that will be used to merge
the result.</li>
<li>A dictionary of pairs (name, value) with the parameters described in
the previous element.</li>
</ul>
<p>an d returns a result Pandas data frame. This frame <strong>must</strong> have one
column with the key column name provided so that it can be properly
merged with the existing data.</p>
</li>
</ol>
<p>If a plugin does not comply with these properties the platform shows a summary of these checks to diagnose the problem.</p>
<div class="figure align-center">
<img alt="../_images/OnTask____Plugin_diagnostics.png" src="../_images/OnTask____Plugin_diagnostics.png" />
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">OnTask (B.2.8.0)</a></h1>








<h3>Navigation</h3>
<p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../Introduction/index.html">What is OnTask</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Install/index.html">Installation process</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Using the tool</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="workflow.html">The Workflow</a></li>
<li class="toctree-l2"><a class="reference internal" href="details.html">Workflow Details</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Data Sources for Upload</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#csv-files">CSV Files</a></li>
<li class="toctree-l3"><a class="reference internal" href="#excel-files">Excel Files</a></li>
<li class="toctree-l3"><a class="reference internal" href="#sql-connection">SQL connection</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#data-upload">Data Upload</a></li>
<li class="toctree-l2"><a class="reference internal" href="#data-merge">Data Merge</a></li>
<li class="toctree-l2"><a class="reference internal" href="#plugins-transforming-the-data-with-your-own-code">Plugins – Transforming the data with your own code</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#plugin-requirements">Plugin requirements</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="table.html">The Table</a></li>
<li class="toctree-l2"><a class="reference internal" href="actions.html">The Actions</a></li>
<li class="toctree-l2"><a class="reference internal" href="scheduler.html">The Scheduler</a></li>
<li class="toctree-l2"><a class="reference internal" href="logs.html">The Logs</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../Tutorial/index.html">OnTask Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Scenarios/index.html">Use Scenarios</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Advanced/index.html">Advanced Features</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  <li><a href="index.html">Using the tool</a><ul>
      <li>Previous: <a href="details.html" title="previous chapter">Workflow Details</a></li>
      <li>Next: <a href="table.html" title="next chapter">The Table</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;Content Licensed under Creative Commons BY 3.0.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.7.4</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.10</a>
      
      |
      <a href="../_sources/Using/dataops.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>